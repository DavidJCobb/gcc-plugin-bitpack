<!doctype html>
<html>
   <head>
      <title>Serialization list to tree</title>
      <style>
html {
   font-family: Calibri, sans-serif;
}

section {
   margin: .5em;
   border: 1px solid #000;
   
   &>header {
      background: #FF7400;
      font-weight: bold;
      
      padding:.25em .5em;
      border-bottom: 1px solid #000;
   }
   &>div {
      padding: 1em;
   }
}

section.input>div {
   textarea {
      display: block;
      width:   60em;
      height:  30em;
   }
}
      </style>
   </head>
   <body>
      <section class="input">
         <header>
            Input
         </header>
         <div>
            <textarea id="in">sTestStruct|a
sTestStruct|b
sTestStruct|c[0:3]
sTestStruct|d[0:3][0:2]
sTestStruct|e as Transformed_E|a
sTestStruct|e as Transformed_E|b
sTestStruct|f[0] as Transformed_F|x
sTestStruct|f[1] as Transformed_F|x
sTestStruct|tag_g
sTestStruct|data_g|(sTestStruct.tag_g == 0) a
sTestStruct|data_g|(sTestStruct.tag_g == 1) b|tag
sTestStruct|data_g|(sTestStruct.tag_g == 1) b|data|(sTestStruct.data_g.b.tag == 0) a
sTestStruct|tag_x
sTestStruct|data_x|(sTestStruct.tag_x == 0) a
sTestStruct|data_x|(sTestStruct.tag_x == 1) b
sTestStruct|data_x|(sTestStruct.tag_x == 2) c
sTestStruct|tag_y
sTestStruct|data_y[0]|(sTestStruct.tag_y == 0) a
sTestStruct|data_y[0]|(sTestStruct.tag_y == 1) b
sTestStruct|data_y[0]|(sTestStruct.tag_y == 2) c
sTestStruct|data_y[1]|(sTestStruct.tag_y == 0) a
sTestStruct|data_y[1]|(sTestStruct.tag_y == 1) b
sTestStruct|data_y[1]|(sTestStruct.tag_y == 2) c
sTestStruct|z as Transformed_Z|tag
sTestStruct|z as Transformed_Z|data|(sTestStruct.z.tag == 0) a
sTestStruct|z as Transformed_Z|data|(sTestStruct.z.tag == 0) b
sTestStruct|z[0] as Transformed_Z|tag
sTestStruct|z[0] as Transformed_Z|data|(sTestStruct.z[0].tag == 0) a
sTestStruct|z[0] as Transformed_Z|data|(sTestStruct.z[0].tag == 1) b
sTestStruct|z[1] as Transformed_Z|tag
sTestStruct|z[1] as Transformed_Z|data|(sTestStruct.z[1].tag == 0) a
sTestStruct|z[1] as Transformed_Z|data|(sTestStruct.z[1].tag == 1) b</textarea>
            <button id="go">To tree</button>
         </div>
      </section>
      <section>
         <header>
            Output
         </header>
         <div>
            <ul id="out-fully-exploded">
            </ul>
         </div>
      </section>
      <script src="serialization_item.js"></script>
      <script src="instruction.js"></script>
      <script src="item_list_to_instruction_tree.js"></script>
      <script>
document.getElementById("go").addEventListener("click", function(e) {
   let list = [];
   {
      let data = document.getElementById("in").value.split("\n");
      for(let item of data) {
         let instance = new serialization_item();
         instance.from_string(item);
         list.push(instance);
      }
   }
   let tree = item_list_to_instruction_tree(list);
});
      </script>
   </body>
</html>